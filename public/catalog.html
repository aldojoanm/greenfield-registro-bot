<!doctype html>
<html lang="es" data-json-url="/api/catalog" data-wa-number="">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Catálogo de Productos</title>
<link rel="icon" href="/image/GREENFIELD-REDONDO.png" />
<style>
  :root{
    /* Paleta verde sobria */
    --brand1:#1F7A4C; --brand2:#2E8B57; --brand3:#6BBF59;
    --bg:#ffffff; --text:#142126; --muted:#55636c;
    --ring:#e6efe9; --panel:#ffffff; --shadow:0 10px 30px rgba(10,60,30,.08);
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--text);
       font:15px/1.5 system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial}
  a{color:inherit;text-decoration:none}

  .wrap{max-width:1500px;margin:24px auto;padding:0 16px}
  .grid{display:grid;grid-template-columns:1fr 420px;gap:24px}
  @media (max-width:1024px){ .grid{grid-template-columns:1fr} }

  .card{background:var(--panel);border:1px solid var(--ring);border-radius:18px;box-shadow:var(--shadow)}

  /* Header con logo (sin texto de marca) */
  .site-header{padding:18px 18px 8px}
  .brand{display:flex;gap:14px;align-items:center;padding:8px 0 14px;border-bottom:1px solid var(--ring)}
  .brand img{width:46px;height:46px;border-radius:50%;object-fit:cover;border:1px solid var(--ring);background:#f4faf6}
  .title{font-size:22px;font-weight:800;letter-spacing:.2px}
  .desc{color:var(--muted);margin:0}
  .meta{display:flex;gap:14px;flex-wrap:wrap;color:var(--muted);font-size:13px;padding:10px 0 2px}
  .pill{display:inline-block;border:1px solid var(--ring);border-radius:999px;padding:6px 10px}
  .pill.brand{border-color:transparent;background:linear-gradient(90deg,var(--brand1),var(--brand2));color:#fff;font-weight:700}

  .section{padding:8px 18px 18px}
  .section-title{display:flex;align-items:center;gap:10px;margin:8px 0 14px;font-weight:900;font-size:18px;letter-spacing:.3px}
  .section-title .dot{width:12px;height:12px;border-radius:50%;background:linear-gradient(90deg,var(--brand2),var(--brand3))}

  .list{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:20px}
  @media (max-width:900px){ .list{grid-template-columns:1fr} }

  .prod{
    display:grid;grid-template-columns:1fr;grid-template-areas:
      "name" "img" "price" "pres" "qty" "btn";
    gap:12px;padding:16px;border:1px solid var(--ring);
    border-radius:16px;background:#fff;min-width:0
  }
  .prod .name{grid-area:name}
  .prod .img{grid-area:img}
  .prod .price-note{grid-area:price}
  .prod .pres-wrap{grid-area:pres}
  .prod .qty-wrap{grid-area:qty}
  .prod .btn-wrap{grid-area:btn}

  .img img{
    width:100%;max-width:420px;margin-inline:auto;
    aspect-ratio:1/1;object-fit:contain;border:1px solid var(--ring);
    border-radius:14px;background:#f5fbf6;display:block
  }
  .name{font-weight:900;font-size:18px;min-width:0}
  .cat{margin-top:6px}
  .cat .tag{display:inline-block;background:rgba(31,122,76,.12);color:var(--brand1);
            border:1px solid rgba(31,122,76,.25);padding:4px 8px;border-radius:999px;font-size:12px;font-weight:700}
  .price-note{color:var(--muted);font-size:14px;margin-top:4px}

  .prod select,.prod input{width:100%;padding:12px;background:#fff;border:1px solid var(--ring);border-radius:12px;color:#000;outline:none}
  .prod input.invalid{border-color:#e76a6a;box-shadow:0 0 0 3px rgba(231,106,106,.15)}
  .sub{color:var(--muted);font-size:12px;margin-top:6px}
  .btn{width:100%;background:linear-gradient(90deg,var(--brand1),var(--brand3));border:none;color:#fff;padding:12px;border-radius:12px;font-weight:900;cursor:pointer}
  .btn:disabled{opacity:.45;cursor:not-allowed}

  .cart{padding:16px}
  .cart h3{margin:0 0 10px;font-size:18px}
  .item{
    display:grid;grid-template-columns:1fr 90px 140px 28px;gap:10px;align-items:center;
    padding:10px 0;border-bottom:1px solid var(--ring)
  }
  .item > div:first-child{min-width:0}
  .item > div:first-child strong{display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .item input{width:100%;padding:8px 10px;border:1px solid var(--ring);border-radius:10px}
  .item input.invalid{border-color:#e76a6a;box-shadow:0 0 0 3px rgba(231,106,106,.15)}
  .rm{background:#fff;border:1px solid var(--ring);border-radius:8px;color:#4c5b52;cursor:pointer}
  .totals{margin-top:10px;border-top:2px solid var(--ring);padding-top:10px;font-weight:900}
  .cta{width:100%;margin-top:12px;padding:12px;border-radius:12px;border:none;color:#fff;background:linear-gradient(90deg,var(--brand1),var(--brand2));font-weight:900;cursor:pointer}
  .muted{color:var(--muted);font-size:13px}
  .empty{color:var(--muted);padding:8px}

  .fab{position:fixed;right:18px;bottom:18px;background:linear-gradient(90deg,var(--brand1),var(--brand2));
       width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;
       color:#fff;box-shadow:var(--shadow);cursor:pointer;z-index:30}
  .badge{position:absolute;top:-6px;right:-6px;background:#ee5858;color:#fff;border-radius:999px;padding:2px 6px;font-size:12px;font-weight:800}
  .fab svg{width:26px;height:26px}
  .modal{position:fixed;inset:0;display:none;z-index:40}
  .modal.show{display:block}
  .backdrop{position:absolute;inset:0;background:rgba(0,0,0,.35)}
  .sheet{position:absolute;left:50%;bottom:0;transform:translateX(-50%);width:min(640px,92vw);max-height:80vh;overflow:auto;background:#fff;border-radius:18px 18px 0 0;box-shadow:var(--shadow);padding:16px}
  .sheet h3{margin:0 0 8px}
  .sheet .close{position:absolute;right:12px;top:10px;border:1px solid var(--ring);background:#fff;border-radius:10px;padding:6px 10px;cursor:pointer}

  .sheet .item > div:first-child strong{white-space:normal;overflow:visible;text-overflow:unset}
  @media (min-width:1025px){ .fab{display:none} .modal{display:none !important} }

  .toast{position:fixed;left:50%;bottom:90px;transform:translateX(-50%);background:#1f2937;color:#fff;border-radius:12px;padding:10px 14px;box-shadow:var(--shadow);opacity:0;pointer-events:none;transition:opacity .2s ease,transform .2s ease;z-index:50}
  .toast.show{opacity:1;transform:translateX(-50%) translateY(-6px)}
</style>
</head>
<body>
  <div class="wrap">
    <div class="grid">
      <!-- IZQUIERDA -->
      <div class="card">
        <div class="site-header">
          <div class="brand">
            <img src="/image/GREENFIELD-REDONDO.png" alt="Logo">
            <div>
              <div class="title">Catálogo de Productos</div>
              <div class="desc">Selecciona presentación y cantidad; añade al carrito para generar tu cotización por WhatsApp.</div>
            </div>
          </div>
          <div class="meta">
            <span class="pill brand">Catálogo</span>
            <span class="pill" id="tc">TC 0.00</span>
          </div>
        </div>

        <div id="sections" class="section"></div>
      </div>

      <!-- DERECHA -->
      <div class="card">
        <div class="cart">
          <h3>Tu selección</h3>
          <div id="cart"></div>
          <div class="totals" id="totals"></div>
          <button id="send" class="cta">Enviar por WhatsApp</button>
          <div class="muted" style="margin-top:6px">Compra mínima: US$ 3.000. Puedes combinar productos.</div>
        </div>
      </div>
    </div>
  </div>

  <!-- FAB carrito (móvil) -->
  <button id="cartFab" class="fab" aria-label="Abrir carrito">
    <span id="cartCount" class="badge" style="display:none">0</span>
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="9" cy="20" r="1.5"></circle>
      <circle cx="17" cy="20" r="1.5"></circle>
      <path d="M3 4h2l2.4 10.2a2 2 0 0 0 2 1.6h7.8a2 2 0 0 0 2-1.6L21 8H7"></path>
    </svg>
  </button>

  <!-- Modal carrito (móvil) -->
  <div id="cartModal" class="modal" aria-hidden="true">
    <div class="backdrop"></div>
    <div class="sheet">
      <button class="close" id="closeModal">Cerrar</button>
      <h3>Tu carrito</h3>
      <div id="cartM"></div>
      <div class="totals" id="totalsM"></div>
      <button id="sendM" class="cta">Enviar por WhatsApp</button>
      <div class="muted" style="margin-top:6px">Compra mínima: US$ 3.000. Puedes combinar productos.</div>
    </div>
  </div>

  <div id="toast" class="toast">Se añadió a tu carrito</div>

  <script src="/catalog.js"></script>
</body>
</html>
